"use strict";(self.webpackChunkcreate_project_docs=self.webpackChunkcreate_project_docs||[]).push([[7221],{28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>o});var i=s(96540);const a={},r=i.createContext(a);function t(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),i.createElement(r.Provider,{value:n},e.children)}},76731:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"system-architecture/components","title":"components","description":"Components and their interfaces","source":"@site/docs/system-architecture/components.md","sourceDirName":"system-architecture","slug":"/system-architecture/components","permalink":"/project-kardon-atlantic-storybook-library-vsd/docs/system-architecture/components","draft":false,"unlisted":false,"editUrl":"https://github.com/Capstone-Projects-2026-spring/project-kardon-atlantic-storybook-library-vsd/edit/main/documentation/docs/system-architecture/components.md","tags":[],"version":"current","lastUpdatedBy":"Lian Welch","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Database Design","permalink":"/project-kardon-atlantic-storybook-library-vsd/docs/system-architecture/database-design"},"next":{"title":"Development Environment","permalink":"/project-kardon-atlantic-storybook-library-vsd/docs/system-architecture/development-environment"}}');var a=s(74848),r=s(28453);const t={sidebar_position:3},o=void 0,l={},c=[{value:"Components and their interfaces",id:"components-and-their-interfaces",level:2},{value:"VSD Client Application",id:"vsd-client-application",level:3},{value:"Application API Layer - Supabase Rest and Realtime",id:"application-api-layer---supabase-rest-and-realtime",level:3},{value:"Authentication Service",id:"authentication-service",level:3},{value:"Storybook Data Service - Database",id:"storybook-data-service---database",level:3},{value:"Media Storage Service",id:"media-storage-service",level:3},{value:"Text-To-Speech Service - External API",id:"text-to-speech-service---external-api",level:3},{value:"Interfaces together",id:"interfaces-together",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"components-and-their-interfaces",children:"Components and their interfaces"}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"vsd-client-application",children:"VSD Client Application"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Web Application - React based front end"}),"\n",(0,a.jsx)(n.li,{children:"Description: Browser based progressive web app (pwa) built using React, HTML, CSS, and JavaScript. This works in the user's browser using HTTPS to communicate with backend services. The user interface allows for loading storybooks, VSD editing through the HTML Canvas API, managing application state, and working with backend services."}),"\n",(0,a.jsx)(n.li,{children:"Responsibilities: Rendering UI components (library, editor, reader), manage application state (books, session, annotations), log user actions (clicks, page navigation), trigger API calls (auth, TTS), play audio, and maintain session tokens locally."}),"\n",(0,a.jsx)(n.li,{children:"Dependencies: Supabase REST API (HTTPS), Supabase realtime (WebSocket), Supabase Auth, Media storage URLs, external text-to-speech API, and browser APIs (canvas, audio, LocalStorage)."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Interfaces"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"User interaction interface (UI Layer)"}),"\n"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Event-driven interface"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'onLogin(email: string, password: string): void\nonRegister(email: string, password: string): void\nonUploadBook(file: File): void\nonSaveBook(bookId: UUID): void\nonSelectVSDObject(objectId: UUID): void\nonPageFlip(direction: "next" | "previous"): void\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"REST communication interface (HTTPS)"}),"\n"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Protocol: HTTPS"}),"\n",(0,a.jsx)(n.li,{children:"Data Format: JSON"}),"\n",(0,a.jsx)(n.li,{children:"Authentication: JWT in Authorization header"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'POST /rest/v1/books\nHeaders:\n  Authorization: Bearer <JWT>\n  Content-Type: application/json\n\nBody:\n{\n  "title": "Brown Bear",\n  "user_id": "uuid"\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "book_id": "uuid",\n  "created_at": "timestamp"\n}\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"Realtime interface (WebSocket)"}),"\n"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Protocol: WebSocket"}),"\n",(0,a.jsx)(n.li,{children:"Used for: Session sync"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:"subscribe(channel: string): void\nunsubscribe(channel: string): void\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"4",children:["\n",(0,a.jsx)(n.li,{children:"TTS Interface"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:"requestSpeech(\n    text: string,\n    language: string,\n    voice: string\n): Promise<AudioStream>\n"})}),"\n",(0,a.jsx)(n.p,{children:"returns audio"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Internally managed data: CurrentBookState, VSDObjectList[], ActivePageIndex, JWT token, and UserPreferences."}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:"classDiagram\n  class VSDClientApp {\n    -currentBookState: Book\n    -vsdObjectList: VSDObject[]\n    -activePageIndex: int\n    -jwtToken: string\n    -userPreferences: UserPreferences\n    +renderUI()\n    +handleLogin(email, password)\n    +handleRegister(email, password)\n    +uploadBook(file)\n    +saveBook(bookId)\n    +selectVSDObject(objectId)\n    +flipPage(direction)\n    +requestSpeech(text, language, voice)\n  }\n\n  class Book {\n    -bookId: UUID\n    -title: string\n    -pages: Page[]\n    +getPage(pageNumber)\n    +addPage(page)\n  }\n\n  class Page {\n    -pageId: UUID\n    -imageUrl: string\n    -pageNumber: int\n    -vsdObjects: VSDObject[]\n    +addVSDObject(obj)\n    +removeVSDObject(objId)\n  }\n\n  class VSDObject {\n    -objectId: UUID\n    -xCoord: float\n    -yCoord: float\n    -width: float\n    -height: float\n    -vocabularyWord: string\n    -ttsLanguage: string\n    +playAudio()\n  }\n\n  class UserPreferences {\n    -language: string\n    -voice: string\n    -theme: string\n  }\n\n  VSDClientApp --\x3e Book\n  Book --\x3e Page\n  Page --\x3e VSDObject\n  VSDClientApp --\x3e UserPreferences"}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"application-api-layer---supabase-rest-and-realtime",children:"Application API Layer - Supabase Rest and Realtime"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Application API layer"}),"\n",(0,a.jsx)(n.li,{children:"Backend-as-a-service (Supabase Rest and Realtime)"}),"\n",(0,a.jsx)(n.li,{children:"Description: The midway between the client and services. Exposes endpoints for operations while providing real-time synchronization using WebSockets. This enforces row-level security and validates authentication access."}),"\n",(0,a.jsx)(n.li,{children:"Responsibilities: Accept client requests, enforce authentication policies, route requests to PostgreSQL, publish realtime events, and validate permissions."}),"\n",(0,a.jsx)(n.li,{children:"Dependencies: PostgreSQL Database, Authentication service, and Supabase storage."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Interface"}),"\n",(0,a.jsx)(n.p,{children:"REST Endpoints"}),"\n",(0,a.jsx)(n.p,{children:"Protocol: HTTPS"}),"\n",(0,a.jsx)(n.p,{children:"Data format: JSON"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"GET /books"})," retrieve user books"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"POST /books"})," create new book"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"PUT /books/{id}"})," update book"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"DELETE /books/{id}"})," delete book"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"GET /pages?book_id=eq.uuid"})," get pages"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"POST /vsd_objects"})," create annotation\nProtocol: WebSocket"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'channel("book-updates")\n  .on("postgres_changes", callback)\n'})}),"\n",(0,a.jsx)(n.p,{children:"For live session updates"}),"\n",(0,a.jsx)(n.mermaid,{value:"classDiagram\n  class APIService {\n    +getBooks(userId)\n    +createBook(book)\n    +updateBook(bookId, book)\n    +deleteBook(bookId)\n    +getPages(bookId)\n    +createVSDObject(obj)\n    +subscribe(channel, callback)\n  }\n\n  class RESTEndpoint {\n    -url: string\n    -method: string\n    -headers: Map\n    -body: JSON\n    +call()\n  }\n\n  class WebSocketChannel {\n    -channelName: string\n    +subscribe(callback)\n    +unsubscribe()\n  }\n\n  APIService --\x3e RESTEndpoint\n  APIService --\x3e WebSocketChannel"}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"authentication-service",children:"Authentication Service"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Managed identity service (Supabase Auth)"}),"\n",(0,a.jsx)(n.li,{children:"Description: Manages user identity, password encryption, and login sessions. This allows secure access to protected resources with token-based authentication."}),"\n",(0,a.jsx)(n.li,{children:"Responsibilities: User registration, login validation, password hashing, and session expiration."}),"\n",(0,a.jsx)(n.li,{children:"Dependencies: PostgreSQL (users table)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Interface"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Registration, returns user and session"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:"register(\n  email: string,\n  password: string\n): Promise<AuthResponse>\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Login"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:"login(\n  email: string,\n  password: string\n): Promise<AuthResponse>\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Session retrieval"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:"getSession(): Session | null\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Logout"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:"logout(): void\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Security protocol: HTTPS required, Row-Level Security (RLS) in database"}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:"classDiagram\n  class AuthService {\n    +register(email, password): AuthResponse\n    +login(email, password): AuthResponse\n    +getSession(): Session\n    +logout(): void\n  }\n\n  class AuthResponse {\n    -userId: UUID\n    -sessionToken: string\n    -expiresAt: timestamp\n  }\n\n  class Session {\n    -userId: UUID\n    -jwtToken: string\n    -expiration: timestamp\n  }\n\n  AuthService --\x3e AuthResponse\n  AuthService --\x3e Session"}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"storybook-data-service---database",children:"Storybook Data Service - Database"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Relational database (PostgreSQL)"}),"\n",(0,a.jsx)(n.li,{children:"Description: Stores books, pages, annotations, and words as structured data. Enforces access policies through foreign keys and row-level security."}),"\n",(0,a.jsx)(n.li,{children:"Responsibilities: persistent storage, data relationships, query filtering, and ownership enforcement."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Interface"}),"\n",(0,a.jsx)(n.p,{children:"Books table"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:"book_id UUID PRIMARY KEY\nuser_id UUID REFERENCES users(id)\ntitle TEXT\ncreated_at TIMESTAMP\n"})}),"\n",(0,a.jsx)(n.p,{children:"Pages table"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:"page_id UUID PRIMARY KEY\nbook_id UUID REFERENCES books(book_id)\nimage_url TEXT\npage_number INTEGER\n"})}),"\n",(0,a.jsx)(n.p,{children:"VSD objects table"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:"object_id UUID PRIMARY KEY\npage_id UUID REFERENCES pages(page_id)\nx_coord FLOAT\ny_coord FLOAT\nwidth FLOAT\nheight FLOAT\nvocabulary_word TEXT\ntts_language TEXT\n"})}),"\n",(0,a.jsx)(n.p,{children:"Access interface"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:"GET /rest/v1/vsd_objects?page_id=eq.uuid\nPOST /rest/v1/vsd_objects\n"})}),"\n",(0,a.jsx)(n.mermaid,{value:"classDiagram\n  class DatabaseService {\n    +getBooks(userId)\n    +getPages(bookId)\n    +getVSDObjects(pageId)\n    +createBook(book)\n    +createVSDObject(obj)\n  }\n\n  class BookTable {\n    -bookId: UUID\n    -userId: UUID\n    -title: string\n    -createdAt: timestamp\n  }\n\n  class PagesTable {\n    -pageId: UUID\n    -bookId: UUID\n    -imageUrl: string\n    -pageNumber: int\n  }\n\n  class VSDObjectsTable {\n    -objectId: UUID\n    -pageId: UUID\n    -xCoord: float\n    -yCoord: float\n    -width: float\n    -height: float\n    -vocabularyWord: string\n    -ttsLanguage: string\n  }\n\n  DatabaseService --\x3e BookTable\n  DatabaseService --\x3e PagesTable\n  DatabaseService --\x3e VSDObjectsTable"}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"media-storage-service",children:"Media Storage Service"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Object storage (Supabase storage bucket)"}),"\n",(0,a.jsx)(n.li,{children:"Description: Stores uploaded storybook images and audio files and provides secure URL retrieval."}),"\n",(0,a.jsx)(n.li,{children:"Responsibilities: file upload, file retrieval, permission enforcement, and URL generation"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Interface"}),"\n",(0,a.jsx)(n.p,{children:"Upload"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:"uploadFile(\n  bucket: string,\n  path: string,\n  file: File\n): Promise<UploadResponse>\n"})}),"\n",(0,a.jsx)(n.p,{children:"Retrieve"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:"getPublicUrl(path: string): string\n"})}),"\n",(0,a.jsx)(n.p,{children:"Delete"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:"deleteFile(path: string): void\n"})}),"\n",(0,a.jsx)(n.mermaid,{value:"classDiagram\n  class MediaStorageService {\n    +uploadFile(bucket, path, file): UploadResponse\n    +getPublicUrl(path): string\n    +deleteFile(path)\n  }\n\n  class UploadResponse {\n    -filePath: string\n    -publicUrl: string\n    -success: bool\n  }\n\n  MediaStorageService --\x3e UploadResponse"}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"text-to-speech-service---external-api",children:"Text-To-Speech Service - External API"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"External cloud API"}),"\n",(0,a.jsx)(n.li,{children:"Description: Converts the selected work into audio, using an external speech service."}),"\n",(0,a.jsx)(n.li,{children:"Responsibilities: Text normalization, language selection, voice generation, and audio waveform output."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Interface"}),"\n",(0,a.jsx)(n.p,{children:"Speech Request"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:"synthesizeSpeech(\n  text: string,\n  languageCode: string,\n  voiceName: string\n): Promise<AudioBlob>\n"})}),"\n",(0,a.jsx)(n.p,{children:"Data Exchange"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Input: plain text, language code, voice ID"}),"\n",(0,a.jsx)(n.li,{children:"Output: audio"}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:"classDiagram\n  class TTSService {\n    +synthesizeSpeech(text, languageCode, voiceName): AudioBlob\n  }\n\n  class AudioBlob {\n    -data: binary\n    -format: string\n    -length: float\n    +play()\n  }\n\n  TTSService --\x3e AudioBlob"}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"interfaces-together",children:"Interfaces together"}),"\n",(0,a.jsx)(n.p,{children:"Work flow"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Client receives click"}),"\n",(0,a.jsx)(n.li,{children:"Client retrieves word"}),"\n",(0,a.jsx)(n.li,{children:"Client calls TTS interface"}),"\n",(0,a.jsx)(n.li,{children:"TTS returns audio"}),"\n",(0,a.jsx)(n.li,{children:"Client plays audio"}),"\n",(0,a.jsx)(n.li,{children:"API layer stores log in database"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"This system has loosely coupled services, standard protocols, secure authentication, scalable backned, and replaceable TTS."}),"\n",(0,a.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);