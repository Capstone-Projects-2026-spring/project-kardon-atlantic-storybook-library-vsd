"use strict";(self.webpackChunkcreate_project_docs=self.webpackChunkcreate_project_docs||[]).push([[9823],{28453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>c});var d=n(96540);const i={},r=d.createContext(i);function t(e){const s=d.useContext(r);return d.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),d.createElement(r.Provider,{value:s},e.children)}},78839:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>h,contentTitle:()=>c,default:()=>a,frontMatter:()=>t,metadata:()=>d,toc:()=>l});const d=JSON.parse('{"id":"system-architecture/database-design","title":"Database Design","description":"We\'re using PostgreSQL through Supabase to handle all our data storage needs - user accounts, books, pages, hotspots, and comments.","source":"@site/docs/system-architecture/database-design.md","sourceDirName":"system-architecture","slug":"/system-architecture/database-design","permalink":"/project-kardon-atlantic-storybook-library-vsd/docs/system-architecture/database-design","draft":false,"unlisted":false,"editUrl":"https://github.com/Capstone-Projects-2026-spring/project-kardon-atlantic-storybook-library-vsd/edit/main/documentation/docs/system-architecture/database-design.md","tags":[],"version":"current","lastUpdatedBy":"RolandG369","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"design","permalink":"/project-kardon-atlantic-storybook-library-vsd/docs/system-architecture/design"},"next":{"title":"Development Environment","permalink":"/project-kardon-atlantic-storybook-library-vsd/docs/system-architecture/development-environment"}}');var i=n(74848),r=n(28453);const t={sidebar_position:2},c="Database Design",h={},l=[{value:"Entity-Relationship Diagram",id:"entity-relationship-diagram",level:2},{value:"Tables",id:"tables",level:2},{value:"users",id:"users",level:3},{value:"books",id:"books",level:3},{value:"pages",id:"pages",level:3},{value:"hotspots",id:"hotspots",level:3},{value:"page_comments",id:"page_comments",level:3},{value:"shared_books",id:"shared_books",level:3},{value:"File Storage",id:"file-storage",level:2},{value:"book-images",id:"book-images",level:3},{value:"Security",id:"security",level:2},{value:"How Things Connect",id:"how-things-connect",level:2},{value:"How It Works in Practice",id:"how-it-works-in-practice",level:2},{value:"Future Ideas",id:"future-ideas",level:2}];function o(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"database-design",children:"Database Design"})}),"\n",(0,i.jsx)(s.p,{children:"We're using PostgreSQL through Supabase to handle all our data storage needs - user accounts, books, pages, hotspots, and comments."}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"entity-relationship-diagram",children:"Entity-Relationship Diagram"}),"\n",(0,i.jsx)(s.mermaid,{value:'erDiagram\n    users ||--o{ books : "owns"\n    users ||--o{ shared_books : "shares with"\n    books ||--|{ pages : "contains"\n    pages ||--o{ hotspots : "has"\n    pages ||--o{ page_comments : "has"\n\n    users {\n        uuid id PK\n        string email UK\n        string username\n        timestamp created_at\n        timestamp updated_at\n    }\n\n    books {\n        uuid id PK\n        uuid user_id FK\n        string title\n        string cover_image_url\n        integer page_count\n        timestamp created_at\n        timestamp updated_at\n    }\n\n    pages {\n        uuid id PK\n        uuid book_id FK\n        integer page_number\n        string image_url\n        text page_text\n        timestamp created_at\n    }\n\n    hotspots {\n        uuid id PK\n        uuid page_id FK\n        string word\n        json coordinates\n        string shape_type\n        timestamp created_at\n    }\n\n    page_comments {\n        uuid id PK\n        uuid page_id FK\n        uuid user_id FK\n        text comment_text\n        timestamp created_at\n    }\n\n    shared_books {\n        uuid id PK\n        uuid book_id FK\n        uuid shared_by_user_id FK\n        uuid shared_with_user_id FK\n        timestamp shared_at\n    }'}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"tables",children:"Tables"}),"\n",(0,i.jsx)(s.h3,{id:"users",children:"users"}),"\n",(0,i.jsx)(s.p,{children:"This table holds basic user account info. Supabase Auth handles most of this automatically."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Column"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Constraints"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"id"})}),(0,i.jsx)(s.td,{children:"UUID"}),(0,i.jsx)(s.td,{children:"PRIMARY KEY"}),(0,i.jsx)(s.td,{children:"Unique user ID"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"email"})}),(0,i.jsx)(s.td,{children:"VARCHAR(255)"}),(0,i.jsx)(s.td,{children:"UNIQUE, NOT NULL"}),(0,i.jsx)(s.td,{children:"Email address"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"username"})}),(0,i.jsx)(s.td,{children:"VARCHAR(100)"}),(0,i.jsx)(s.td,{children:"NOT NULL"}),(0,i.jsx)(s.td,{children:"Display name"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"created_at"})}),(0,i.jsx)(s.td,{children:"TIMESTAMP"}),(0,i.jsx)(s.td,{children:"DEFAULT NOW()"}),(0,i.jsx)(s.td,{children:"When account was created"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"updated_at"})}),(0,i.jsx)(s.td,{children:"TIMESTAMP"}),(0,i.jsx)(s.td,{children:"DEFAULT NOW()"}),(0,i.jsx)(s.td,{children:"Last update"})]})]})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Indexes:"})," Primary key on ",(0,i.jsx)(s.code,{children:"id"}),", unique on ",(0,i.jsx)(s.code,{children:"email"})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"books",children:"books"}),"\n",(0,i.jsx)(s.p,{children:"Each uploaded storybook gets a record here."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Column"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Constraints"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"id"})}),(0,i.jsx)(s.td,{children:"UUID"}),(0,i.jsx)(s.td,{children:"PRIMARY KEY"}),(0,i.jsx)(s.td,{children:"Unique book ID"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"user_id"})}),(0,i.jsx)(s.td,{children:"UUID"}),(0,i.jsx)(s.td,{children:"FOREIGN KEY, NOT NULL"}),(0,i.jsx)(s.td,{children:"Who owns this book"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"title"})}),(0,i.jsx)(s.td,{children:"VARCHAR(255)"}),(0,i.jsx)(s.td,{children:"NOT NULL"}),(0,i.jsx)(s.td,{children:"Book title"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"cover_image_url"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{}),(0,i.jsx)(s.td,{children:"Cover image location in storage"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"page_count"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"DEFAULT 0"}),(0,i.jsx)(s.td,{children:"How many pages"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"created_at"})}),(0,i.jsx)(s.td,{children:"TIMESTAMP"}),(0,i.jsx)(s.td,{children:"DEFAULT NOW()"}),(0,i.jsx)(s.td,{children:"When uploaded"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"updated_at"})}),(0,i.jsx)(s.td,{children:"TIMESTAMP"}),(0,i.jsx)(s.td,{children:"DEFAULT NOW()"}),(0,i.jsx)(s.td,{children:"Last edited"})]})]})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Indexes:"})," Primary key on ",(0,i.jsx)(s.code,{children:"id"}),", index on ",(0,i.jsx)(s.code,{children:"user_id"})," for faster library lookups"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Relationships:"})," Links to users table. If user is deleted, their books are deleted too (CASCADE)."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"pages",children:"pages"}),"\n",(0,i.jsx)(s.p,{children:"Individual pages within a book."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Column"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Constraints"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"id"})}),(0,i.jsx)(s.td,{children:"UUID"}),(0,i.jsx)(s.td,{children:"PRIMARY KEY"}),(0,i.jsx)(s.td,{children:"Unique page ID"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"book_id"})}),(0,i.jsx)(s.td,{children:"UUID"}),(0,i.jsx)(s.td,{children:"FOREIGN KEY, NOT NULL"}),(0,i.jsx)(s.td,{children:"Which book this belongs to"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"page_number"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"NOT NULL"}),(0,i.jsx)(s.td,{children:"Page order (starts at 1)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"image_url"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"NOT NULL"}),(0,i.jsx)(s.td,{children:"Image location in storage"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"page_text"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{}),(0,i.jsx)(s.td,{children:"Text content (optional)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"created_at"})}),(0,i.jsx)(s.td,{children:"TIMESTAMP"}),(0,i.jsx)(s.td,{children:"DEFAULT NOW()"}),(0,i.jsx)(s.td,{children:"When created"})]})]})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Indexes:"})," Primary key on ",(0,i.jsx)(s.code,{children:"id"}),", composite on ",(0,i.jsx)(s.code,{children:"(book_id, page_number)"})," for efficient page loading"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Relationships:"})," Links to books table. Pages are deleted if their book is deleted."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Constraint:"})," Can't have duplicate page numbers in the same book."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"hotspots",children:"hotspots"}),"\n",(0,i.jsx)(s.p,{children:"Interactive regions on pages that speak words when clicked."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Column"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Constraints"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"id"})}),(0,i.jsx)(s.td,{children:"UUID"}),(0,i.jsx)(s.td,{children:"PRIMARY KEY"}),(0,i.jsx)(s.td,{children:"Unique hotspot ID"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"page_id"})}),(0,i.jsx)(s.td,{children:"UUID"}),(0,i.jsx)(s.td,{children:"FOREIGN KEY, NOT NULL"}),(0,i.jsx)(s.td,{children:"Which page this is on"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"word"})}),(0,i.jsx)(s.td,{children:"VARCHAR(255)"}),(0,i.jsx)(s.td,{children:"NOT NULL"}),(0,i.jsx)(s.td,{children:"Word to speak via TTS"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"coordinates"})}),(0,i.jsx)(s.td,{children:"JSONB"}),(0,i.jsx)(s.td,{children:"NOT NULL"}),(0,i.jsx)(s.td,{children:"Where the hotspot is drawn"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"shape_type"})}),(0,i.jsx)(s.td,{children:"VARCHAR(50)"}),(0,i.jsx)(s.td,{children:"DEFAULT 'rectangle'"}),(0,i.jsx)(s.td,{children:"rectangle, circle, or polygon"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"created_at"})}),(0,i.jsx)(s.td,{children:"TIMESTAMP"}),(0,i.jsx)(s.td,{children:"DEFAULT NOW()"}),(0,i.jsx)(s.td,{children:"When created"})]})]})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Indexes:"})," Primary key on ",(0,i.jsx)(s.code,{children:"id"}),", index on ",(0,i.jsx)(s.code,{children:"page_id"})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Relationships:"})," Links to pages table. Deleted when page is deleted."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Coordinates format:"})}),"\n",(0,i.jsx)(s.p,{children:"Rectangle:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{"x": 100, "y": 150, "width": 200, "height": 150}\n'})}),"\n",(0,i.jsx)(s.p,{children:"Circle:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{"x": 200, "y": 200, "radius": 50}\n'})}),"\n",(0,i.jsx)(s.p,{children:"Polygon:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{"points": [{"x": 10, "y": 20}, {"x": 30, "y": 40}, {"x": 15, "y": 60}]}\n'})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"page_comments",children:"page_comments"}),"\n",(0,i.jsx)(s.p,{children:"Caretakers can leave notes on pages for themselves or other editors."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Column"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Constraints"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"id"})}),(0,i.jsx)(s.td,{children:"UUID"}),(0,i.jsx)(s.td,{children:"PRIMARY KEY"}),(0,i.jsx)(s.td,{children:"Unique comment ID"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"page_id"})}),(0,i.jsx)(s.td,{children:"UUID"}),(0,i.jsx)(s.td,{children:"FOREIGN KEY, NOT NULL"}),(0,i.jsx)(s.td,{children:"Which page"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"user_id"})}),(0,i.jsx)(s.td,{children:"UUID"}),(0,i.jsx)(s.td,{children:"FOREIGN KEY, NOT NULL"}),(0,i.jsx)(s.td,{children:"Who wrote it"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"comment_text"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"NOT NULL"}),(0,i.jsx)(s.td,{children:"The comment"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"created_at"})}),(0,i.jsx)(s.td,{children:"TIMESTAMP"}),(0,i.jsx)(s.td,{children:"DEFAULT NOW()"}),(0,i.jsx)(s.td,{children:"When posted"})]})]})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Indexes:"})," Primary key on ",(0,i.jsx)(s.code,{children:"id"}),", index on ",(0,i.jsx)(s.code,{children:"page_id"})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Relationships:"})," Links to both pages and users. Deleted if page or user is deleted."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"shared_books",children:"shared_books"}),"\n",(0,i.jsx)(s.p,{children:"Tracks when users share books with each other."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Column"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Constraints"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"id"})}),(0,i.jsx)(s.td,{children:"UUID"}),(0,i.jsx)(s.td,{children:"PRIMARY KEY"}),(0,i.jsx)(s.td,{children:"Unique share record ID"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"book_id"})}),(0,i.jsx)(s.td,{children:"UUID"}),(0,i.jsx)(s.td,{children:"FOREIGN KEY, NOT NULL"}),(0,i.jsx)(s.td,{children:"Which book"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"shared_by_user_id"})}),(0,i.jsx)(s.td,{children:"UUID"}),(0,i.jsx)(s.td,{children:"FOREIGN KEY, NOT NULL"}),(0,i.jsx)(s.td,{children:"Who shared it"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"shared_with_user_id"})}),(0,i.jsx)(s.td,{children:"UUID"}),(0,i.jsx)(s.td,{children:"FOREIGN KEY, NOT NULL"}),(0,i.jsx)(s.td,{children:"Who received it"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"shared_at"})}),(0,i.jsx)(s.td,{children:"TIMESTAMP"}),(0,i.jsx)(s.td,{children:"DEFAULT NOW()"}),(0,i.jsx)(s.td,{children:"When shared"})]})]})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Indexes:"})," Primary key on ",(0,i.jsx)(s.code,{children:"id"}),", index on ",(0,i.jsx)(s.code,{children:"shared_with_user_id"})," for finding books shared with you"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Relationships:"})," Links to books and users. Deleted if book is deleted."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Constraint:"})," Can't share the same book to the same person twice."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"file-storage",children:"File Storage"}),"\n",(0,i.jsx)(s.p,{children:"We're using Supabase Storage buckets to store uploaded files."}),"\n",(0,i.jsx)(s.h3,{id:"book-images",children:"book-images"}),"\n",(0,i.jsx)(s.p,{children:"Page images live here."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Path:"})," ",(0,i.jsx)(s.code,{children:"{user_id}/{book_id}/{page_number}.png"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Privacy:"})," Only accessible to book owner or users the book is shared with"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Allowed:"})," PNG, JPG, JPEG files"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Size limit:"})," 10 MB per image"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"security",children:"Security"}),"\n",(0,i.jsx)(s.p,{children:"We're using Supabase Row Level Security (RLS) to control who can access what."}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Books"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"You can only see and edit your own books"}),"\n",(0,i.jsx)(s.li,{children:"You can view books shared with you (but not edit them)"}),"\n",(0,i.jsx)(s.li,{children:"You can share your books with others"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Pages, Hotspots, Comments"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Access follows book permissions"}),"\n",(0,i.jsx)(s.li,{children:"You can only edit these for books you own"}),"\n",(0,i.jsx)(s.li,{children:"You can view them for shared books"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Shared Books"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"You can share your own books"}),"\n",(0,i.jsx)(s.li,{children:"You can see what's been shared with you"}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"how-things-connect",children:"How Things Connect"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Users own books"}),"\n",(0,i.jsx)(s.li,{children:"Books have multiple pages (sorted by page number)"}),"\n",(0,i.jsx)(s.li,{children:"Pages can have multiple hotspots"}),"\n",(0,i.jsx)(s.li,{children:"Pages can have multiple comments"}),"\n",(0,i.jsx)(s.li,{children:"Books can be shared with multiple users"}),"\n",(0,i.jsx)(s.li,{children:"Everything cascades - delete a book and all its pages/hotspots go with it"}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"how-it-works-in-practice",children:"How It Works in Practice"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"When someone creates a book:"})}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["They upload images (saved to ",(0,i.jsx)(s.code,{children:"book-images"})," bucket)"]}),"\n",(0,i.jsx)(s.li,{children:"A book record gets created"}),"\n",(0,i.jsx)(s.li,{children:"A page record is created for each image"}),"\n",(0,i.jsx)(s.li,{children:"They can now add hotspots in edit mode"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"When someone adds a hotspot:"})}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"They draw a shape on the page in the Canvas editor"}),"\n",(0,i.jsx)(s.li,{children:"They type in a word"}),"\n",(0,i.jsx)(s.li,{children:"We save the hotspot with its coordinates and word"}),"\n",(0,i.jsx)(s.li,{children:"In reading mode, clicking that area speaks the word using Web Speech API"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"When someone reads a book:"})}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"They pick a book from their library"}),"\n",(0,i.jsx)(s.li,{children:"We load the book and its pages"}),"\n",(0,i.jsx)(s.li,{children:"We load the hotspots for each page"}),"\n",(0,i.jsx)(s.li,{children:"When they click a hotspot, we pass the word to TTS"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"When someone shares a book:"})}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Owner adds a share record linking the book to another user"}),"\n",(0,i.jsx)(s.li,{children:"That user can now see the book in their library"}),"\n",(0,i.jsx)(s.li,{children:"They can read it but can't edit it"}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"future-ideas",children:"Future Ideas"}),"\n",(0,i.jsx)(s.p,{children:"Things we might add later:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Analytics table to track which hotspots get clicked most"}),"\n",(0,i.jsx)(s.li,{children:"Templates for common VSD layouts"}),"\n",(0,i.jsx)(s.li,{children:"User preferences (favorite TTS voice, language settings)"}),"\n",(0,i.jsx)(s.li,{children:"Tags or categories for organizing books"}),"\n",(0,i.jsx)(s.li,{children:"Favorites/bookmarks"}),"\n"]})]})}function a(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);